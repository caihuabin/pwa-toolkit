!function(e){function t(r){if(n[r])return n[r].exports;var c=n[r]={i:r,l:!1,exports:{}};return e[r].call(c.exports,c,c.exports,t),c.l=!0,c.exports}var n={};t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/cache",t(t.s=4)}([,function(e,t,n){"use strict";Cache.prototype.add||(Cache.prototype.add=function(e){return this.addAll([e])}),Cache.prototype.addAll||(Cache.prototype.addAll=function(e){function t(e){this.name="NetworkError",this.code=19,this.message=e}var n=this;return t.prototype=Object.create(Error.prototype),Promise.resolve().then(function(){if(arguments.length<1)throw new TypeError;return e=e.map(function(e){return e instanceof Request?e:String(e)}),Promise.all(e.map(function(e){"string"==typeof e&&(e=new Request(e));var n=new URL(e.url).protocol;if("http:"!==n&&"https:"!==n)throw new t("Invalid scheme");return fetch(e.clone())}))}).then(function(t){return Promise.all(t.map(function(t,r){return n.put(e[r],t)}))}).then(function(){})}),CacheStorage.prototype.match||(CacheStorage.prototype.match=function(e,t){var n=this;return this.keys().then(function(r){var c;return r.reduce(function(r,i){return r.then(function(){return c||n.open(i).then(function(n){return n.match(e,t)}).then(function(e){return c=e})})},Promise.resolve())})});var r=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(e){var t=new URL(e,self.location);return t.hash="",t.toString()},o=function(e){return e.map(function(e){return/^https?:\/\//i.test(e)?e:i(e)})},s=function(e){return-1===e.search(self.location.host)},a=function(){function e(t){r(this,e),this.options=Object.assign({},e.defaultOptions,t),this.cacheName=String(this.options.cacheName),this.cacheAssets=o(this.options.assets),this.cacheAssetsSet=new Set(this.cacheAssets),this.errorAssetsSet=new Set,this._init()}return c(e,[{key:"_init",value:function(){this._install(),this._activate(),this._fetch(),this._message()}},{key:"_install",value:function(){var e=this;self.addEventListener("install",function(t){return t.waitUntil(caches.open(e.cacheName).then(function(t){return Promise.all(e._cacheRequests(t))}).then(function(){return e.options.skipWaiting&&self.skipWaiting()}))})}},{key:"_activate",value:function(){var e=this;self.addEventListener("activate",function(t){return t.waitUntil(caches.open(e.cacheName).then(function(t){return t.keys().then(function(n){return Promise.all(n.map(function(n){e.cacheAssetsSet.has(n.url)||t.delete(n)}))})}).then(function(){return self.clients.claim()}))})}},{key:"_fetch",value:function(){var e=this,t=function(e){return Promise.resolve("离线默认内容")},n=function(n){return fetch(n).then(function(t){if(!t||!t.ok)throw new Error(n.url+"：请求失败，状态码"+t.status);return caches.open(e.cacheName).then(function(e){return e.put(i(n.url),t)}),t.clone()}).catch(function(){return t()})};self.addEventListener("fetch",function(r){if("GET"===r.request.method){var c=i(r.request.url);e.cacheAssetsSet.has(c)&&!e.errorAssetsSet.has(c)&&r.respondWith(caches.open(e.cacheName).then(function(e){return e.match(c).then(function(e){if(e)return e.clone();throw Error("数据缓存丢失，将会重新获取数据")})}).catch(function(e){var c=r.request.clone();return navigator.onLine?n(c):t()}))}})}},{key:"_message",value:function(){self.addEventListener("message",function(e){var t=e.data;if(t)switch(t.action){case"skipWaiting":self.skipWaiting&&self.skipWaiting()}})}},{key:"_cacheRequests",value:function(e){var t=this;return Array.from(this.cacheAssetsSet).map(function(n){var r=s(n)?new Request(n,{credentials:"include",mode:"no-cors"}):new Request(n,{credentials:"include"});return fetch(r).then(function(t){if(!t.ok&&"no-cors"!==r.mode)throw new Error(n+"：请求失败，状态码"+t.status);return e.put(n,t)}).catch(function(e){console.warn(e,"预先缓存失败 url:"+n),t.errorAssetsSet.add(n)})})}}]),e}();a.defaultOptions={cacheName:"cache-name",assets:[],skipWaiting:!1},e.exports=a},,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1);new(n.n(r).a)({cacheName:"cache-name",assets:["/cache/index.js","/cache/","https://google.com/images/branding/googlelogo/2x/googlelogo_color_120x44dp.png"]})}]);